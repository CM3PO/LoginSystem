import json

# Load users from the JSON file
def load_users():
    try:
        with open('users.json', 'r') as file:  # Try to open the file
            return json.load(file)  # Read the file and return the data
    except FileNotFoundError:
        return {}  # If the file doesn't exist, return an empty dictionary

users = load_users()  # This will store the loaded user data

# Check if the username and password match
def login(username, password):
    if username in users and users[username]["password"] == password:
        return True  # If they match, return True
    return False  # If they don't match, return False

# Create a new user and save it to the file
def create_user(username, password):
    if username in users:
        print("Username already exists!")  # If the username already exists, show an error
        return False
    users[username] = {"password": password}  # Add the new user to the dictionary
    save_users()  # Save the updated data to the file
    print(f"User {username} created successfully!")
    return True

# Save the user data to the file
def save_users():
    with open('users.json', 'w') as file:
        json.dump(users, file, indent=4)  # Write the data in a readable format
